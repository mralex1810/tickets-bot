# Tickets Bot

Бот с билетами по матанализу (или по любому другому предмету, который вы туда закинете).
Скидывает красивые картинки с конспектами по выбранному билету, а также видео (строго в формате `.mp4`).

> **Дисклеймер**: данное программное обеспечение создано исключительно в целях *подготовки к экзаменам*.
> Автор не рекомендует использовать бота для списывания на экзамене.

Код распространяется по [лицензии MIT](LICENSE).

## Как поднять?

### Рекомендуемый способ
Поставить [Docker](https://docs.docker.com/install/) и собрать образ из
[Dockerfile](Dockerfile).

### Настройка бота

1. Скачать бота и создать необходимые директории

```bash
git clone https://github.com/mralex1810/tickets-bot.git
cd tickets-bot
mkdir tickets
```

2. В `tickets/` закинуть директории с билетами.

Название директории — номер билета.

В каждом билете фотографии (скидываются по названию в алфавитном порядке) и файл `config.yml`:

```yaml
name: Сходимость билета 1 в пространстве рациональных чисел
tag:  min
```

3. Создать бота у [@BotFather](https://t.me/BotFather) и запомнить токен.

4. Запустить бота.

Docker-way через `docker compose`:

```yaml
version: '3'
services:
  math-tickets:
    image: tickets-bot:1
    volumes:
    - ./math:/app/tickets:ro
    - db:/db
    environment:
    - TICKETS_BOT_TOKEN="TOKEN_FROM_BOTFATHER"
    - TICKETS_BOT_ADMIN_ID="YOUR_TELEGRAM_ID"
    - TICKETS_BOT_DB="/db/math.sqlite3"

volumes:
  db:
```

6. Синхронизировать директорию с базой данных: от имени админа (его ID в Telegram
указывается в `TICKETS_BOT_ADMIN_ID`) ввести команду `/scan`. Если изменились билеты,
достаточно лишь заново просканить их ботом — перезагружать бота не нужно.

> **NB**: при (ре)старте бот **не подгружает** билеты из директории

**Готово!** Вы восхитительны!

Можно поднять на одном хосте сразу несколько ботов. В таком случае нужно не забывать
менять `TICKETS_BOT_DB` на соответсвующий путь.

По всем вопросам можно написать мне [в Telegram](https://t.me/MrAlex18)

Для КТ y2021 сохранены билеты по следующим предметам: 
- [Дифференциальные уравнения](https://disk.yandex.ru/d/arFSN0SgNKSjQw)
- [Математический анализ (Виноградов)](https://disk.yandex.ru/d/bg2JKbSCc-Tncw)
- [Математическая логика](https://disk.yandex.ru/d/KdAO6CGygJhJJw)
- [Теория вероятностей (Лимар)](https://disk.yandex.ru/d/64Jn7K04nQf_Ug)
